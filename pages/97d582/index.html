<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>shell | Esqbs&#39;s blog</title>
    <meta name="generator" content="VuePress 1.8.0">
    <link rel="icon" href="/blog-pub/img/favicon.ico">
    <link rel="manifest" href="/blog-pub/manifest.json">
    <link rel="apple-touch-icon" href="/blog-pub/img/avatar.png">
    <meta name="description" content="个人博客">
    <meta name="charset" content="UTF-8">
    <meta name="keywords" content="个人博客">
    <meta name="theme-color" content="#F9648D">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    
    <link rel="preload" href="/blog-pub/assets/css/0.styles.9d611ad1.css" as="style"><link rel="preload" href="/blog-pub/assets/js/app.b54a84d7.js" as="script"><link rel="preload" href="/blog-pub/assets/js/2.d3978339.js" as="script"><link rel="preload" href="/blog-pub/assets/js/3.3ba4034a.js" as="script"><link rel="preload" href="/blog-pub/assets/js/41.f90d94c5.js" as="script"><link rel="prefetch" href="/blog-pub/assets/js/10.7045eeaf.js"><link rel="prefetch" href="/blog-pub/assets/js/11.179e54ba.js"><link rel="prefetch" href="/blog-pub/assets/js/12.75195318.js"><link rel="prefetch" href="/blog-pub/assets/js/13.bd81b27f.js"><link rel="prefetch" href="/blog-pub/assets/js/14.fa8d16fa.js"><link rel="prefetch" href="/blog-pub/assets/js/15.4a1a888f.js"><link rel="prefetch" href="/blog-pub/assets/js/16.47f6153b.js"><link rel="prefetch" href="/blog-pub/assets/js/17.47ed404c.js"><link rel="prefetch" href="/blog-pub/assets/js/18.ddef768d.js"><link rel="prefetch" href="/blog-pub/assets/js/19.c649bbd9.js"><link rel="prefetch" href="/blog-pub/assets/js/20.e83e9082.js"><link rel="prefetch" href="/blog-pub/assets/js/21.8897dc92.js"><link rel="prefetch" href="/blog-pub/assets/js/22.e9f86a07.js"><link rel="prefetch" href="/blog-pub/assets/js/23.1bdb44b2.js"><link rel="prefetch" href="/blog-pub/assets/js/24.0b5f3921.js"><link rel="prefetch" href="/blog-pub/assets/js/25.4642efd4.js"><link rel="prefetch" href="/blog-pub/assets/js/26.0814f796.js"><link rel="prefetch" href="/blog-pub/assets/js/27.bad0794c.js"><link rel="prefetch" href="/blog-pub/assets/js/28.e2d6b796.js"><link rel="prefetch" href="/blog-pub/assets/js/29.c3bd83bd.js"><link rel="prefetch" href="/blog-pub/assets/js/30.1026b4a3.js"><link rel="prefetch" href="/blog-pub/assets/js/31.a7ba59f4.js"><link rel="prefetch" href="/blog-pub/assets/js/32.10e4e44f.js"><link rel="prefetch" href="/blog-pub/assets/js/33.f2fe6896.js"><link rel="prefetch" href="/blog-pub/assets/js/34.fff1ec23.js"><link rel="prefetch" href="/blog-pub/assets/js/35.cf46d647.js"><link rel="prefetch" href="/blog-pub/assets/js/36.8fd58218.js"><link rel="prefetch" href="/blog-pub/assets/js/37.618d9081.js"><link rel="prefetch" href="/blog-pub/assets/js/38.eb83eea4.js"><link rel="prefetch" href="/blog-pub/assets/js/39.26c16fc7.js"><link rel="prefetch" href="/blog-pub/assets/js/4.ede9cfba.js"><link rel="prefetch" href="/blog-pub/assets/js/40.9f25e7b6.js"><link rel="prefetch" href="/blog-pub/assets/js/42.85eb831d.js"><link rel="prefetch" href="/blog-pub/assets/js/43.093a080f.js"><link rel="prefetch" href="/blog-pub/assets/js/44.2288e425.js"><link rel="prefetch" href="/blog-pub/assets/js/45.2a12b7c6.js"><link rel="prefetch" href="/blog-pub/assets/js/46.c62bb40c.js"><link rel="prefetch" href="/blog-pub/assets/js/47.720a93c7.js"><link rel="prefetch" href="/blog-pub/assets/js/48.dabe585e.js"><link rel="prefetch" href="/blog-pub/assets/js/49.cd517e33.js"><link rel="prefetch" href="/blog-pub/assets/js/5.c55c9766.js"><link rel="prefetch" href="/blog-pub/assets/js/50.955aa7ac.js"><link rel="prefetch" href="/blog-pub/assets/js/51.054ca7b8.js"><link rel="prefetch" href="/blog-pub/assets/js/52.3eaf02b1.js"><link rel="prefetch" href="/blog-pub/assets/js/53.7a30eeee.js"><link rel="prefetch" href="/blog-pub/assets/js/54.367b551d.js"><link rel="prefetch" href="/blog-pub/assets/js/6.265c445f.js"><link rel="prefetch" href="/blog-pub/assets/js/7.41ea435b.js"><link rel="prefetch" href="/blog-pub/assets/js/8.45309f22.js"><link rel="prefetch" href="/blog-pub/assets/js/9.7a365615.js">
    <link rel="stylesheet" href="/blog-pub/assets/css/0.styles.9d611ad1.css">
  </head>
  <body class="theme-mode-light">
    <div id="app" data-server-rendered="true"><div class="theme-container have-rightmenu have-body-img"><header class="navbar blur"><div title="目录" class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog-pub/" class="home-link router-link-active"><img src="/blog-pub/img/logo.png" alt="Esqbs's blog" class="logo"> <span class="site-name can-hide">Esqbs's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog-pub/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog-pub/note/" class="nav-link">学习笔记</a></div><div class="nav-item"><a href="/blog-pub/record/" class="nav-link">日常记录</a></div><div class="nav-item"><a href="/blog-pub/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/blog-pub/pages/beb6c0/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/blog-pub/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-pub/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/blog-pub/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/blog-pub/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <div class="sidebar-hover-trigger"></div> <aside class="sidebar" style="display:none;"><div class="blogger"><img src="/blog-pub/img/avatar.jpg"> <div class="blogger-info"><h3>Esqbs</h3> <span>日积月累</span></div></div> <nav class="nav-links"><div class="nav-item"><a href="/blog-pub/" class="nav-link">首页</a></div><div class="nav-item"><a href="/blog-pub/note/" class="nav-link">学习笔记</a></div><div class="nav-item"><a href="/blog-pub/record/" class="nav-link">日常记录</a></div><div class="nav-item"><a href="/blog-pub/about/" class="nav-link">关于</a></div><div class="nav-item"><a href="/blog-pub/pages/beb6c0/" class="nav-link">收藏</a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="索引" class="dropdown-title"><a href="/blog-pub/archives/" class="link-title">索引</a> <span class="title" style="display:none;">索引</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/blog-pub/categories/" class="nav-link">分类</a></li><li class="dropdown-item"><!----> <a href="/blog-pub/tags/" class="nav-link">标签</a></li><li class="dropdown-item"><!----> <a href="/blog-pub/archives/" class="nav-link">归档</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>HTML</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>CSS</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>JavaScript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Node</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>网络</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>WebApi</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Typescript</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>前端工程化</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Git</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>工具类</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>bug记录</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>React</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Electron</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>PWA</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>图形学</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>监控上报</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>无障碍和兼容性</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>代码检查</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>测试</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>浏览器</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Linux</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog-pub/pages/97d582/" aria-current="page" class="active sidebar-link">shell</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level2"><a href="/blog-pub/pages/97d582/#bash手册" class="sidebar-link">bash手册</a></li><li class="sidebar-sub-header level2"><a href="/blog-pub/pages/97d582/#文件和目录" class="sidebar-link">文件和目录</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#cd目录切换" class="sidebar-link">cd目录切换</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#pwd显示当前目录" class="sidebar-link">pwd显示当前目录</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#ls当前目录下的文件和目录" class="sidebar-link">ls当前目录下的文件和目录</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#touch创建文件" class="sidebar-link">touch创建文件</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#cp复制文件" class="sidebar-link">cp复制文件</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#ln链接文件" class="sidebar-link">ln链接文件</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#mv移动文件" class="sidebar-link">mv移动文件</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#rm删除文件" class="sidebar-link">rm删除文件</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#mkdir创建文件夹" class="sidebar-link">mkdir创建文件夹</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#rmdir删除空文件夹" class="sidebar-link">rmdir删除空文件夹</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#file查看文件类型" class="sidebar-link">file查看文件类型</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#cat查看文件" class="sidebar-link">cat查看文件</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#more命令-分页工具" class="sidebar-link">more命令 分页工具</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#less命令" class="sidebar-link">less命令</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#tail命令" class="sidebar-link">tail命令</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#head命令" class="sidebar-link">head命令</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog-pub/pages/97d582/#进程" class="sidebar-link">进程</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#ps进程查看" class="sidebar-link">ps进程查看</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#top实时监测进程" class="sidebar-link">top实时监测进程</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#kill结束进程" class="sidebar-link">kill结束进程</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog-pub/pages/97d582/#磁盘" class="sidebar-link">磁盘</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#mount" class="sidebar-link">mount</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#umount" class="sidebar-link">umount</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#df显示已挂载的文件系统" class="sidebar-link">df显示已挂载的文件系统</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#du" class="sidebar-link">du</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog-pub/pages/97d582/#处理数据文件" class="sidebar-link">处理数据文件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#sort" class="sidebar-link">sort</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#grep数据搜索" class="sidebar-link">grep数据搜索</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#数据压缩" class="sidebar-link">数据压缩</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#gzip" class="sidebar-link">gzip</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#归档" class="sidebar-link">归档</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog-pub/pages/97d582/#shell" class="sidebar-link">shell</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#shell父子关系" class="sidebar-link">shell父子关系</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#进程列表" class="sidebar-link">进程列表</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#子shell" class="sidebar-link">子shell</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#后台模式" class="sidebar-link">后台模式</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#协程" class="sidebar-link">协程</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#外部命令" class="sidebar-link">外部命令</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#内建命令" class="sidebar-link">内建命令</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog-pub/pages/97d582/#环境变量" class="sidebar-link">环境变量</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#全局环境变量" class="sidebar-link">全局环境变量</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#局部环境变量" class="sidebar-link">局部环境变量</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#用户自定义变量" class="sidebar-link">用户自定义变量</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#设置path环境变量" class="sidebar-link">设置PATH环境变量</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#系统环境变量" class="sidebar-link">系统环境变量</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#环境变量持久化" class="sidebar-link">环境变量持久化</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#数组变量" class="sidebar-link">数组变量</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog-pub/pages/97d582/#linux文件权限" class="sidebar-link">Linux文件权限</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#linux安全性" class="sidebar-link">Linux安全性</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#用户" class="sidebar-link">用户</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#用户组" class="sidebar-link">用户组</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#文件权限" class="sidebar-link">文件权限</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#文件共享" class="sidebar-link">文件共享</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#访问控制列表" class="sidebar-link">访问控制列表</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog-pub/pages/97d582/#linux文件系统" class="sidebar-link">Linux文件系统</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#创建分区" class="sidebar-link">创建分区</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#格式化" class="sidebar-link">格式化</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#文件系统的检查与修复" class="sidebar-link">文件系统的检查与修复</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#逻辑卷" class="sidebar-link">逻辑卷</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog-pub/pages/97d582/#编辑器" class="sidebar-link">编辑器</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#vim" class="sidebar-link">vim</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog-pub/pages/97d582/#安装软件" class="sidebar-link">安装软件</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#使用apt安装" class="sidebar-link">使用apt安装</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#使用snap容器安装" class="sidebar-link">使用snap容器安装</a></li><li class="sidebar-sub-header level3"><a href="/blog-pub/pages/97d582/#从源代码安装" class="sidebar-link">从源代码安装</a></li></ul></li><li class="sidebar-sub-header level2"><a href="/blog-pub/pages/97d582/#防火墙" class="sidebar-link">防火墙</a></li></ul></li><li><a href="/blog-pub/pages/1644ef/" class="sidebar-link">shell脚本</a></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Java</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>数据库</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>后端</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Docker</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <div><main class="page"><div class="theme-vdoing-wrapper bg-style-6"><div class="articleInfo-wrap" data-v-d5e9d2e6><div class="articleInfo" data-v-d5e9d2e6><ul class="breadcrumbs" data-v-d5e9d2e6><li data-v-d5e9d2e6><a href="/blog-pub/" title="首页" class="iconfont icon-home router-link-active" data-v-d5e9d2e6></a></li> <li data-v-d5e9d2e6><a href="/blog-pub/note/#学习笔记" data-v-d5e9d2e6>学习笔记</a></li><li data-v-d5e9d2e6><a href="/blog-pub/note/#Linux" data-v-d5e9d2e6>Linux</a></li></ul> <div class="info" data-v-d5e9d2e6><div title="作者" class="author iconfont icon-touxiang" data-v-d5e9d2e6><a href="javascript:;" data-v-d5e9d2e6>Esqbs</a></div> <div title="创建时间" class="date iconfont icon-riqi" data-v-d5e9d2e6><a href="javascript:;" data-v-d5e9d2e6>2023-12-21</a></div> <!----></div></div></div> <!----> <div class="content-wrapper"><div class="right-menu-wrapper"><div class="right-menu-margin"><div class="right-menu-title">目录</div> <div class="right-menu-content"></div></div></div> <h1><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAAXNSR0IArs4c6QAABH1JREFUSA3tVl1oHFUUPmdmd2ltklqbpJDiNnXFmgbFktho7YMPNiJSSZM0+CAYSkUELVhM6YuwIPpgoOKDqOBDC0XE2CQoNtQXBUFTTcCi+Wlh1V2TQExsUzcltd3M9Tt3ZjZzZ2fT+OJTL8yeM+eee757fmeJbq//KQL8X3DUSFOcfr7cRsRtxNQMWueeVzOkaITIGqQHNg5y8+jNW9ldM7A6nTpAjuolUikAwq7CE3WcM2RRDz+XGVgN3FptU/aUSlvq9Pa3iZ1+sgAqJyyAFqkipd9dqiwHF3P65YycLWc/6sqGrvoEoIp6DOFaX5h6+dnfjkWprwqsPk0dUGq5vySwDImC10KxFHgGL1SWoc92O3eVht09qdXNH11I2SsTsJYqMWzihqGMi+A+Garf3BAuuLI5oGlULyNfyB/HYNujwktOfRrMr5t77NmevqaUopx0grnKAyvVpmwUDB4x6FPXuGvYLTDwWsejwgtgkYKPqRJg8SV6xaiZ3ZTppGneS4yfH5/66fZSDHv+QZci/+h5c5UHtpy67JUqGppM0sh0Nc1dW6/N1W5Yoqat8/TU/VnadmdeW2PLLSyh0cvxBs3KbqTmwYPpxN4do/mzE8nEpvX/UMu2Wbp74zUAK5q6WkHns7V0eWkdPbPzd3rxkTGybadYySumVzhcaJFbs5UrEkQ/+CK8gF5dnh/6ciIZ73gwQ927L1IitoxKLXYP3SjYdOrHHfTZhRRlFyrorafPk20B3HPD1y2G3qKZME5Jcf3t/HUC13/8tSd++vqFveMUTwAUxSUFI1QekR1+bIze3D9MF2aq6cPvG72CgnldWCFqyRw3lwH8ZMerjTD9ElRO7Gv44wNpC90aASqGfVlz/Rx17srQ57/UU26hkhQqUB7dBR71WmzQhHUnblGmVOEw0jhbV1n9OlXUDCIRGaNV5Jp43N516fN7JmnTHdfp7Hgy0luO4aMhtkLL8Bi3bUWYvzh5Mn1dTxrL6QmGuRhGL/TiTTxRoEdTszSaq9GR0NGA3KdkOz3hqSV3MIDhQ5IVX/Ivx3umBti2es2h4eZby7x8br1rkf7Mo90AqC8aQ3sJeNzqFRu+vSANAQe3PL7l0HGOAdwDCeZYvNKeoZp1Qfs6Aipndh86HmFRi0LAnEO47wsqM6cdfjh3jBPUzhZy7nvlUfFsamED1VQt6aISHVymXZ/B2aCtIG8AI8xfobj2d3en1wWVhOeHELKmLQ1s211s88comkv4UCwWyF787mJdYXtNfhKAXVqnKTq8QZvGAGGOfaTo5pGZ/PwbUCr5+DPr/1J92JNHr9aOl/F3iI5+O1nfybsGxoimvZ3ViWSluDITw3P37mypheDIPY0tw7+O/5ApbkYw+zpfaUVu32Pi98+defdUhEpZkRFq0aqyNh9FuL9hpYbEm6iwi0z2REd09ZmyENEbuhjDWzKvZXTqKYaBIr3tt5kuPtQBZFvEUwHt60vfCNu41XsksH9Ij1BMMz1Y0OOunHNShFIP5868g5zeXmuLwL9T4b6Q2+KejgAAAABJRU5ErkJggg==">shell<!----></h1> <!----> <div class="theme-vdoing-content content__default"><h2 id="bash手册"><a href="#bash手册" class="header-anchor">#</a> bash手册</h2> <p>man命令可以访问Linux系统的手册页</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">man</span> <span class="token function">man</span>
</code></pre></div><p>某个命令查看帮助</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">man</span> <span class="token parameter variable">--help</span>
</code></pre></div><h2 id="文件和目录"><a href="#文件和目录" class="header-anchor">#</a> 文件和目录</h2> <h3 id="cd目录切换"><a href="#cd目录切换" class="header-anchor">#</a> cd目录切换</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token builtin class-name">cd</span> /usr/bin <span class="token comment">#绝对路径</span>

$ <span class="token builtin class-name">cd</span> ./ <span class="token comment">#相对路径</span>
</code></pre></div><h3 id="pwd显示当前目录"><a href="#pwd显示当前目录" class="header-anchor">#</a> pwd显示当前目录</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token builtin class-name">pwd</span>
</code></pre></div><h3 id="ls当前目录下的文件和目录"><a href="#ls当前目录下的文件和目录" class="header-anchor">#</a> ls当前目录下的文件和目录</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">ls</span>
$ <span class="token function">ls</span> <span class="token parameter variable">-F</span> <span class="token comment">#区分文件和目录</span>
$ <span class="token function">ls</span> <span class="token parameter variable">-a</span> <span class="token comment">#显示隐藏文件 在Linux中，隐藏文件通常是文件名以点号（.）开始的文件</span>
$ <span class="token function">ls</span> <span class="token parameter variable">-F</span> <span class="token parameter variable">-R</span> <span class="token comment">#递归，列出当前目录所包含的子目录中的文件</span>
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> <span class="token comment">#显示长列表</span>

drwxr-xr-x <span class="token number">2</span> yuan yuan <span class="token number">4096</span> <span class="token number">12</span>月 <span class="token number">11</span> <span class="token number">14</span>:15 公共的
drwxr-xr-x <span class="token number">2</span> yuan yuan <span class="token number">4096</span> <span class="token number">12</span>月 <span class="token number">11</span> <span class="token number">14</span>:15 模板
drwxrwxr-x <span class="token number">4</span> yuan yuan <span class="token number">4096</span> <span class="token number">12</span>月 <span class="token number">21</span> <span class="token number">15</span>:27 软件
drwxr-xr-x <span class="token number">2</span> yuan yuan <span class="token number">4096</span> <span class="token number">12</span>月 <span class="token number">11</span> <span class="token number">14</span>:15 视频
</code></pre></div><ul><li>文件类型，比如目录（d）、文件（-）、链接文件（l）、字符设备（c）或块设备（b）</li> <li>文件的权限</li> <li>文件的硬链接数</li> <li>文件属主</li> <li>文件属组</li> <li>文件大小（以字节为单位）</li> <li>文件的上次修改时间</li> <li>文件名或目录名</li></ul> <blockquote><p>如果想查看单个文件的长列表，那么只需在ls -l命令之后跟上该文件名即可。但如果想查看目录的相关信息，而非目录所包含的内容，则除了-l选项之外，还得添加-d选项，即ls -ld Directory-Name。</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment">#正则匹配</span>
$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> my_scr?pt  <span class="token comment">#问号（?）代表任意单个字符</span>
$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> my_scr*  <span class="token comment">#星号（*）代表零个或多个字符</span>
$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> my_scr<span class="token punctuation">[</span><span class="token operator">!</span>i<span class="token punctuation">]</span>pt <span class="token comment">#惊叹号（!）将不需要的内容排除在外</span>
</code></pre></div><h3 id="touch创建文件"><a href="#touch创建文件" class="header-anchor">#</a> touch创建文件</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">touch</span> my_script
</code></pre></div><h3 id="cp复制文件"><a href="#cp复制文件" class="header-anchor">#</a> cp复制文件</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cp</span> <span class="token parameter variable">-i</span> my_script my_scrjpt <span class="token comment">#复制文件，并命名，-i覆盖前询问</span>
$ <span class="token function">cp</span> <span class="token parameter variable">-i</span> my_script my_dir/ <span class="token comment">#将文件复制到现有目录</span>
$ <span class="token function">cp</span> <span class="token parameter variable">-R</span> my_dir/ new_dir/ <span class="token comment">#创建new_dir目录，并递归地复制整个目录的内容</span>
</code></pre></div><h3 id="ln链接文件"><a href="#ln链接文件" class="header-anchor">#</a> ln链接文件</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">ln</span> <span class="token parameter variable">-s</span> my_script slink_script <span class="token comment">#符号链接（也称为软链接）是一个文件，该文件指向存放在虚拟目录结构中某个地方的另一个文件，符号连接文件和指向文件inode编号不同</span>

$ <span class="token function">ls</span> <span class="token parameter variable">-l</span>
-rw-rw-r-- <span class="token number">1</span> yuan yuan <span class="token number">0</span> <span class="token number">12</span>月 <span class="token number">21</span> <span class="token number">19</span>:19 my_script
lrwxrwxrwx <span class="token number">1</span> yuan yuan <span class="token number">9</span> <span class="token number">12</span>月 <span class="token number">21</span> <span class="token number">19</span>:25 slink_script -<span class="token operator">&gt;</span> my_script

$ <span class="token function">ls</span> <span class="token parameter variable">-i</span> *script
<span class="token number">14942848</span> my_script  <span class="token number">14942849</span> slink_script


$ <span class="token function">ln</span> my_script hlink_script <span class="token comment">#硬链接创建的是一个独立的虚拟文件，其中包含了原始文件的信息以及位置，以硬链接相连的文件共享同一个inode编号。这是因为两者其实就是同一个文件。另外，彼此的文件大小也一模一样。</span>

$ <span class="token function">ls</span> <span class="token parameter variable">-i</span> *script
<span class="token number">14942848</span> hlink_script  <span class="token number">14942848</span> my_script  <span class="token number">14942849</span> slink_script
</code></pre></div><h3 id="mv移动文件"><a href="#mv移动文件" class="header-anchor">#</a> mv移动文件</h3> <p>移动文件只影响文件名，但inode编号和时间戳保持不变</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">mv</span> my_script my_scrbpt <span class="token comment">#重命名</span>
$ <span class="token function">mv</span> my_script ./dir/
</code></pre></div><h3 id="rm删除文件"><a href="#rm删除文件" class="header-anchor">#</a> rm删除文件</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">rm</span> my_script
$ <span class="token function">rm</span> <span class="token parameter variable">-rf</span> my_script <span class="token comment">#强制删除my_script及子目录和文件</span>
</code></pre></div><h3 id="mkdir创建文件夹"><a href="#mkdir创建文件夹" class="header-anchor">#</a> mkdir创建文件夹</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">mkdir</span> new_dir
$ <span class="token function">mkdir</span> <span class="token parameter variable">-p</span> new_dir/sub_dir <span class="token comment">#-p选项可以根据需要创建缺失的父目录</span>
</code></pre></div><h3 id="rmdir删除空文件夹"><a href="#rmdir删除空文件夹" class="header-anchor">#</a> rmdir删除空文件夹</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">rmdir</span> new_dir
</code></pre></div><h3 id="file查看文件类型"><a href="#file查看文件类型" class="header-anchor">#</a> file查看文件类型</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">file</span> my_script
</code></pre></div><h3 id="cat查看文件"><a href="#cat查看文件" class="header-anchor">#</a> cat查看文件</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> <span class="token parameter variable">-n</span> my_script <span class="token comment">#-n输出行号</span>
</code></pre></div><h3 id="more命令-分页工具"><a href="#more命令-分页工具" class="header-anchor">#</a> more命令 分页工具</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">more</span> my_script
</code></pre></div><h3 id="less命令"><a href="#less命令" class="header-anchor">#</a> less命令</h3> <p>less命令能够识别上下箭头键以及上下翻页键</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">less</span> my_script
</code></pre></div><h3 id="tail命令"><a href="#tail命令" class="header-anchor">#</a> tail命令</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">tail</span> <span class="token parameter variable">-2</span> my_script
</code></pre></div><h3 id="head命令"><a href="#head命令" class="header-anchor">#</a> head命令</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">head</span> <span class="token parameter variable">-2</span> my_script
</code></pre></div><h2 id="进程"><a href="#进程" class="header-anchor">#</a> 进程</h2> <h3 id="ps进程查看"><a href="#ps进程查看" class="header-anchor">#</a> ps进程查看</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">ps</span> <span class="token parameter variable">-ef</span> <span class="token comment">#查看系统中运行的所有进程</span>

<span class="token environment constant">UID</span>          PID    <span class="token environment constant">PPID</span>  C STIME TTY          TIME CMD
yuan       <span class="token number">72648</span>   <span class="token number">72647</span>  <span class="token number">0</span> <span class="token number">20</span>:30 pts/0    00:00:00 <span class="token parameter variable">-bash</span>
yuan       <span class="token number">73487</span>   <span class="token number">72648</span>  <span class="token number">0</span> <span class="token number">20</span>:36 pts/0    00:00:00 <span class="token function">ps</span> <span class="token parameter variable">-f</span>
</code></pre></div><ul><li>UID：启动该进程的用户</li> <li>PID：进程ID</li> <li>PPID：父进程的PID（如果该进程是由另一个进程启动的）</li> <li>C：进程生命期中的CPU利用率</li> <li>STIME：进程启动时的系统时间</li> <li>TTY：进程是从哪个终端设备启动的</li> <li>TIME：运行进程的累计CPU时间</li> <li>CMD：启动的程序名称</li></ul> <h3 id="top实时监测进程"><a href="#top实时监测进程" class="header-anchor">#</a> top实时监测进程</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">top</span>

<span class="token function">top</span> - <span class="token number">20</span>:39:54 up <span class="token number">42</span> min,  <span class="token number">2</span> users,  load average: <span class="token number">0.02</span>, <span class="token number">0.13</span>, <span class="token number">0.21</span>
任务: <span class="token number">426</span> total,   <span class="token number">1</span> running, <span class="token number">425</span> sleeping,   <span class="token number">0</span> stopped,   <span class="token number">0</span> zombie
%Cpu<span class="token punctuation">(</span>s<span class="token punctuation">)</span>:  <span class="token number">0.0</span> us,  <span class="token number">0.4</span> sy,  <span class="token number">0.0</span> ni, <span class="token number">99.6</span> id,  <span class="token number">0.0</span> wa,  <span class="token number">0.0</span> hi,  <span class="token number">0.0</span> si,  <span class="token number">0.0</span> st
MiB Mem <span class="token builtin class-name">:</span>  <span class="token number">12835.0</span> total,   <span class="token number">7962.1</span> free,   <span class="token number">2222.3</span> used,   <span class="token number">2650.6</span> buff/cache
MiB Swap:   <span class="token number">2048.0</span> total,   <span class="token number">2048.0</span> free,      <span class="token number">0.0</span> used.  <span class="token number">10291.5</span> avail Mem 
 
  进程号 <span class="token environment constant">USER</span>      PR  NI    VIRT    RES    SHR    %CPU  %MEM     TIME+ COMMAND                                                                                                                                                                       
      <span class="token number">1</span> root      <span class="token number">20</span>   <span class="token number">0</span>  <span class="token number">167332</span>  <span class="token number">11548</span>   <span class="token number">7964</span> S   <span class="token number">0.0</span>   <span class="token number">0.1</span>   <span class="token number">0</span>:05.64 systemd                                                                                                                                                                       
      <span class="token number">2</span> root      <span class="token number">20</span>   <span class="token number">0</span>       <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> S   <span class="token number">0.0</span>   <span class="token number">0.0</span>   <span class="token number">0</span>:00.01 kthreadd                                                                                                                                                                      
      <span class="token number">3</span> root       <span class="token number">0</span> <span class="token parameter variable">-20</span>       <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> I   <span class="token number">0.0</span>   <span class="token number">0.0</span>   <span class="token number">0</span>:00.00 rcu_gp                                                                                                                                                                        
      <span class="token number">4</span> root       <span class="token number">0</span> <span class="token parameter variable">-20</span>       <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> I   <span class="token number">0.0</span>   <span class="token number">0.0</span>   <span class="token number">0</span>:00.00 rcu_par_gp                                                                                                                                                                    
      <span class="token number">5</span> root       <span class="token number">0</span> <span class="token parameter variable">-20</span>       <span class="token number">0</span>      <span class="token number">0</span>      <span class="token number">0</span> I   <span class="token number">0.0</span>   <span class="token number">0.0</span>   <span class="token number">0</span>:00.00 slub_flushwq                   
</code></pre></div><h3 id="kill结束进程"><a href="#kill结束进程" class="header-anchor">#</a> kill结束进程</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">kill</span> <span class="token parameter variable">-9</span> <span class="token number">1000</span>
</code></pre></div><table><thead><tr><th>信号</th> <th>名称</th> <th>描述</th></tr></thead> <tbody><tr><td>1</td> <td>HUP</td> <td>挂起</td></tr> <tr><td>2</td> <td>INT</td> <td>中断</td></tr> <tr><td>3</td> <td>QUIT</td> <td>结束运行</td></tr> <tr><td>9</td> <td>KILL</td> <td>无条件终止</td></tr> <tr><td>11</td> <td>SEGV</td> <td>段错误</td></tr> <tr><td>15</td> <td>TERM</td> <td>尽可能终止</td></tr> <tr><td>17</td> <td>STOP</td> <td>无条件停止运行，但不终止</td></tr> <tr><td>18</td> <td>TSTP</td> <td>停止或暂停，但继续在后台运行</td></tr> <tr><td>19</td> <td>CONT</td> <td>在STOP或TSTP之后恢复执行</td></tr></tbody></table> <blockquote><p>以root身份使用pkill命令时要格外小心。命令中的通配符很容易意外地将系统的重要进程终止。这可能会导致文件系统损坏</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">pkill</span> http* <span class="token comment">#pkill命令可以使用程序名代替PID来终止进程</span>
</code></pre></div><h2 id="磁盘"><a href="#磁盘" class="header-anchor">#</a> 磁盘</h2> <h3 id="mount"><a href="#mount" class="header-anchor">#</a> mount</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">mount</span> <span class="token parameter variable">-t</span> ext4 <span class="token comment">#输出当前系统已挂载的设备列表</span>
$ <span class="token function">mount</span> <span class="token parameter variable">-t</span> vfat /dev/sdb1 /media/disk <span class="token comment">#挂载</span>
</code></pre></div><h3 id="umount"><a href="#umount" class="header-anchor">#</a> umount</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">umount</span> /dev/sdb1 <span class="token comment">#umount命令支持通过设备文件或者挂载点来指定要卸载的设备。</span>
</code></pre></div><h3 id="df显示已挂载的文件系统"><a href="#df显示已挂载的文件系统" class="header-anchor">#</a> df显示已挂载的文件系统</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">df</span> <span class="token parameter variable">-h</span>
</code></pre></div><h3 id="du"><a href="#du" class="header-anchor">#</a> du</h3> <p>在默认情况下，du命令会显示当前目录下所有的文件、目录和子目录的磁盘使用情况，并以磁盘块为单位来表明每个文件或目录占用了多大存储空间</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">du</span> <span class="token parameter variable">-h</span>
</code></pre></div><h2 id="处理数据文件"><a href="#处理数据文件" class="header-anchor">#</a> 处理数据文件</h2> <h3 id="sort"><a href="#sort" class="header-anchor">#</a> sort</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sort</span> my_file <span class="token comment">#排序</span>
$ <span class="token function">sort</span> <span class="token parameter variable">-n</span> my_file <span class="token comment">#按数值排序</span>
$ <span class="token function">sort</span> <span class="token parameter variable">-M</span> my_file <span class="token comment">#识别三字符的月份名并正确排序 Jan Feb Mar ...</span>


$ <span class="token function">sort</span> <span class="token parameter variable">-t</span> <span class="token string">&quot;:&quot;</span> <span class="token parameter variable">-k</span> <span class="token number">3</span> <span class="token parameter variable">-n</span> /etc/passwd <span class="token comment">#先使用-t选项指定字段分隔符，然后使用-k选项指定排序字段</span>

root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologin
adm:x:3:4:adm:/var/adm:/sbin/nologin

$ <span class="token function">du</span> <span class="token parameter variable">-h</span> <span class="token operator">|</span> <span class="token function">sort</span> <span class="token parameter variable">-nr</span> <span class="token comment">#-r选项对数值按照降序排列</span>
1008k   mrtg-2.9.29.tar.gz
972k    bldg1
888k    fbs2.pdf
760k    Printtest
680k    rsync-2.6.6.tar.gz
</code></pre></div><h3 id="grep数据搜索"><a href="#grep数据搜索" class="header-anchor">#</a> grep数据搜索</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">grep</span> <span class="token number">111</span> my_file <span class="token comment">#包含111</span>
$ <span class="token function">grep</span> <span class="token parameter variable">-v</span> <span class="token number">111</span> my_file <span class="token comment">#不包含111</span>
$ <span class="token function">grep</span> <span class="token parameter variable">-n</span> <span class="token number">111</span> my_file <span class="token comment">#输出行号</span>
$ <span class="token function">grep</span> <span class="token parameter variable">-c</span> <span class="token number">111</span> my_file <span class="token comment">#匹配行数</span>
$ <span class="token function">grep</span> <span class="token punctuation">[</span><span class="token number">13</span><span class="token punctuation">]</span> my_file <span class="token comment">#正则匹配</span>
</code></pre></div><blockquote><p>egrep命令是grep的一个衍生，支持POSIX扩展正则表达式，其中包含更多可用于指定匹配模式的字符（参见第20章）。fgrep则是另外一个版本，支持将匹配模式指定为以换行符分隔的一系列固定长度的字符串</p></blockquote> <h3 id="数据压缩"><a href="#数据压缩" class="header-anchor">#</a> 数据压缩</h3> <h3 id="gzip"><a href="#gzip" class="header-anchor">#</a> gzip</h3> <ul><li>gzip：用于压缩文件</li> <li>zcat：用于查看压缩过的文本文件的内容</li> <li>gunzip：用于解压文件</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">gzip</span> my_*
$ gunzip my_*
</code></pre></div><h3 id="归档"><a href="#归档" class="header-anchor">#</a> 归档</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">tar</span> <span class="token parameter variable">-cvf</span> my.tar  my_sc* <span class="token comment">#创建归档</span>
$ <span class="token function">tar</span> <span class="token parameter variable">-xvf</span> my.tar <span class="token comment">#从归档提取</span>
</code></pre></div><blockquote><p>在下载开源软件时经常会看到文件名以.tgz结尾，这是经gzip压缩过的tar文件，可以用命令tar -zxvf filename.tgz来提取其中的内容</p></blockquote> <table><thead><tr><th>选项</th> <th>描述</th></tr></thead> <tbody><tr><td>-C</td> <td>切换到指定目录</td></tr> <tr><td>-f</td> <td>将结果输出到文件</td></tr> <tr><td>-j</td> <td>将输出传给bzip2命令进行压缩</td></tr> <tr><td>-J</td> <td>将输出结果传给xz命令进行雅压缩</td></tr> <tr><td>-p</td> <td>保留文件的所有权限</td></tr> <tr><td>-v</td> <td>在处理文件是显示文件名</td></tr> <tr><td>-z</td> <td>将输出传递给gzip命令进行压缩</td></tr> <tr><td>-Z</td> <td>将输出传递给compress命令进行压缩</td></tr></tbody></table> <h2 id="shell"><a href="#shell" class="header-anchor">#</a> shell</h2> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> /etc/shells  <span class="token comment">#/etc/shells文件中列出了各种已安装的shell</span>
<span class="token comment"># /etc/shells: valid login shells</span>
/bin/sh
/bin/bash
/usr/bin/bash
/bin/rbash
/usr/bin/rbash
/usr/bin/sh
/bin/dash
/usr/bin/dash
/usr/bin/screen


$ <span class="token function">ls</span> <span class="token parameter variable">-lF</span> /usr/bin/bash <span class="token comment">#长列表中文件名尾部的星号（*）表明bash文件（bash shell）是一个可执行程序</span>
-rwxr-xr-x. <span class="token number">1</span> root root <span class="token number">1219248</span> Nov  <span class="token number">8</span> <span class="token number">11</span>:30 /usr/bin/bash*

$ <span class="token builtin class-name">echo</span> <span class="token variable">$0</span> 
<span class="token comment"># 有了方便的$0变量，就能知道当前使用的shell了。输入命令dash，启动Dash shell，通过echo $0显示新的shell</span>
<span class="token comment"># bash之前有一个连字符（-）。这表明该shell是用户的登录shell</span>
<span class="token parameter variable">-bash</span>
</code></pre></div><h3 id="shell父子关系"><a href="#shell父子关系" class="header-anchor">#</a> shell父子关系</h3> <p>当你在CLI提示符处输入bash命令（或是其他shell程序名）时，会创建新的shell程序。这是一个子shell。子shell也拥有CLI提示符，同样会等待命令输入</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">ps</span> <span class="token parameter variable">-f</span>
<span class="token environment constant">UID</span>          PID    <span class="token environment constant">PPID</span>  C STIME TTY          TIME CMD
yuan       <span class="token number">72648</span>   <span class="token number">72647</span>  <span class="token number">0</span> <span class="token number">20</span>:30 pts/0    00:00:00 <span class="token parameter variable">-bash</span>
yuan       <span class="token number">93282</span>   <span class="token number">72648</span>  <span class="token number">0</span> <span class="token number">22</span>:48 pts/0    00:00:00 <span class="token function">ps</span> <span class="token parameter variable">-f</span>
</code></pre></div><h3 id="进程列表"><a href="#进程列表" class="header-anchor">#</a> 进程列表</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token builtin class-name">pwd</span> <span class="token punctuation">;</span> <span class="token function">ls</span> test* <span class="token punctuation">;</span> <span class="token builtin class-name">cd</span> /etc <span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span> <span class="token punctuation">;</span> <span class="token builtin class-name">cd</span> <span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span> <span class="token punctuation">;</span> <span class="token function">ls</span> my*
/home/christine
test_file  test_one  test_two
/etc
/home/christine
my_file  my_scrapt  my_script  my_scrypt
$
</code></pre></div><h3 id="子shell"><a href="#子shell" class="header-anchor">#</a> 子shell</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token punctuation">(</span>pwd <span class="token punctuation">;</span> <span class="token function">ls</span> test* <span class="token punctuation">;</span> <span class="token builtin class-name">cd</span> /etc <span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span> <span class="token punctuation">;</span> <span class="token builtin class-name">cd</span> <span class="token punctuation">;</span> <span class="token builtin class-name">pwd</span> <span class="token punctuation">;</span> <span class="token function">ls</span> my*<span class="token punctuation">)</span>
/home/christine
test_file  test_one  test_two
/etc
/home/christine
my_file  my_scrapt  my_script  my_scrypt
$
</code></pre></div><blockquote><p>在交互式CLI shell会话中，子shell同样存在问题，它并非真正的多进程处理，原因在于终端与子shell的I/O绑定在了一起。</p></blockquote> <h3 id="后台模式"><a href="#后台模式" class="header-anchor">#</a> 后台模式</h3> <p>在后台模式中运行命令可以在处理命令的同时让出CLI，以供他用</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sleep</span> <span class="token number">3000</span><span class="token operator">&amp;</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">2542</span>
$
$ <span class="token function">ps</span> <span class="token parameter variable">-f</span>
<span class="token environment constant">UID</span>          PID    <span class="token environment constant">PPID</span>  C STIME TTY          TIME CMD
yuan       <span class="token number">72648</span>   <span class="token number">72647</span>  <span class="token number">0</span> <span class="token number">20</span>:30 pts/0    00:00:00 <span class="token parameter variable">-bash</span>
yuan       <span class="token number">94110</span>   <span class="token number">72648</span>  <span class="token number">0</span> <span class="token number">22</span>:54 pts/0    00:00:00 <span class="token function">sleep</span> <span class="token number">300</span>
yuan       <span class="token number">94445</span>   <span class="token number">72648</span>  <span class="token number">0</span> <span class="token number">22</span>:56 pts/0    00:00:00 <span class="token function">ps</span> <span class="token parameter variable">-f</span>
$
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">jobs</span> <span class="token parameter variable">-l</span> <span class="token comment">#jobs命令能够显示当前运行在后台模式中属于你的所有进程（作业）</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+ <span class="token number">94110</span> 运行中               <span class="token function">sleep</span> <span class="token number">300</span> <span class="token operator">&amp;</span>
</code></pre></div><h3 id="协程"><a href="#协程" class="header-anchor">#</a> 协程</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ coproc My_Job <span class="token punctuation">{</span> <span class="token function">sleep</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token punctuation">}</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token number">2706</span>
$
$ <span class="token function">jobs</span>
<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>+ Running                   coproc My_Job <span class="token punctuation">{</span> <span class="token function">sleep</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token punctuation">}</span> <span class="token operator">&amp;</span>
$
</code></pre></div><h3 id="外部命令"><a href="#外部命令" class="header-anchor">#</a> 外部命令</h3> <p>外部命令（有时也称为文件系统命令）是存在于bash shell之外的程序</p> <p>每当执行外部命令时，就会创建一个子进程。这种操作称为衍生</p> <p>无论是衍生出子进程还是创建了子shell，都仍然可以通过信号与其互通，这一点无论是在使用命令行还是在编写脚本时都极其有用。进程间以发送信号的方式彼此通信。</p> <h3 id="内建命令"><a href="#内建命令" class="header-anchor">#</a> 内建命令</h3> <p>与外部命令不同，内建命令无须使用子进程来执行</p> <h2 id="环境变量"><a href="#环境变量" class="header-anchor">#</a> 环境变量</h2> <p>环境变量允许在内存中存储数据，以便shell中运行的程序或脚本能够轻松访问到这些数据</p> <h3 id="全局环境变量"><a href="#全局环境变量" class="header-anchor">#</a> 全局环境变量</h3> <p>全局环境变量对于shell会话和所有生成的子shell都是可见的</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">env</span> <span class="token comment">#查看全局变量</span>
$ <span class="token function">printenv</span> <span class="token environment constant">PATH</span> <span class="token comment">#查看某个全局变量</span>
$ <span class="token builtin class-name">echo</span> <span class="token environment constant">$HOME</span> <span class="token comment">#查看某个全局变量</span>
</code></pre></div><h3 id="局部环境变量"><a href="#局部环境变量" class="header-anchor">#</a> 局部环境变量</h3> <p>局部环境变量只能在定义它的进程中可见</p> <p>set命令可以显示特定进程的所有环境变量，既包括局部变量、全局变量，也包括用户自定义变量</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token builtin class-name">set</span>
</code></pre></div><blockquote><p>env命令、printenv命令和set命令之间的差异很细微。set命令既会显示全局和局部环境变量、用户自定义变量以及局部shell函数，还会按照字母顺序对结果进行排序。与set命令不同，env命令和printenv命令既不会对变量进行排序，也不会输出局部环境变量、局部用户自定义变量以及局部shell函数。在这种情况下，env命令和printenv命令的输出是重复的</p></blockquote> <h3 id="用户自定义变量"><a href="#用户自定义变量" class="header-anchor">#</a> 用户自定义变量</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token assign-left variable">my_var</span><span class="token operator">=</span><span class="token string">&quot;1231231&quot;</span>
$ <span class="token builtin class-name">echo</span> <span class="token variable">$my_var</span>
<span class="token number">1231231</span>
$ <span class="token function">bash</span> <span class="token comment">#创建子shell</span>
$ <span class="token builtin class-name">echo</span> <span class="token variable">$my_var</span>

$ <span class="token builtin class-name">exit</span> <span class="token comment">#退出子shell</span>
<span class="token builtin class-name">exit</span>
$ <span class="token builtin class-name">echo</span> <span class="token variable">$my_var</span>
<span class="token number">1231231</span>
$ <span class="token builtin class-name">export</span> my_var
$ <span class="token function">bash</span> <span class="token comment">#创建子shell</span>
$ <span class="token builtin class-name">echo</span> <span class="token variable">$my_var</span>
<span class="token number">1231231</span>
</code></pre></div><ul><li>局部用户自定义环境变量仅对该shell进程可见</li> <li>删除环境变量</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token builtin class-name">unset</span> my_var
</code></pre></div><blockquote><p>如果要用到（doing anything with）变量，就使用$；如果要操作（doing anything to）变量，则不使用$。这条规则的一个例外是使用printenv显示某个变量的值</p></blockquote> <blockquote><p>如果是在子进程中删除了一个全局环境变量，那么该操作仅对子进程有效。该全局环境变量在父进程中依然可用</p></blockquote> <h3 id="设置path环境变量"><a href="#设置path环境变量" class="header-anchor">#</a> 设置PATH环境变量</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">ls</span> /home/christine/Scripts/
myprog
$ <span class="token builtin class-name">echo</span> <span class="token environment constant">$PATH</span>
/home/christine/.local/bin:/home/christine/bin:/usr/local/bin:/usr/
bin:/usr/local/sbin:/usr/sbin
$
$ <span class="token assign-left variable"><span class="token environment constant">PATH</span></span><span class="token operator">=</span><span class="token environment constant">$PATH</span>:/home/christine/Scripts    
$
$ myprog
The factorial of <span class="token number">5</span> is <span class="token number">120</span>
$
</code></pre></div><h3 id="系统环境变量"><a href="#系统环境变量" class="header-anchor">#</a> 系统环境变量</h3> <h4 id="登录shell"><a href="#登录shell" class="header-anchor">#</a> 登录shell</h4> <ol><li><p>/etc/profile文件是系统中默认的bash shell的主启动文件。系统中的每个用户登录时都会执行这个启动文件</p></li> <li><p>$HOME目录下的启动文件，用户可以对其编辑并添加自己的环境变量，其中的环境变量会在每次启动bash shell会话时生效，shell会按照下列顺序执行第一个被找到的文件，余下的则被忽略</p> <ul><li>$HOME/.bash_profile</li> <li>$HOME/.bash_login</li> <li>$HOME/.profile</li></ul></li></ol> <h4 id="交互式shell进程"><a href="#交互式shell进程" class="header-anchor">#</a> 交互式shell进程</h4> <p>作为交互式shell启动的bash并不处理/etc/profile文件，只检查用户$HOME目录中的.bashrc文件</p> <h4 id="作为运行脚本的非交互式shell"><a href="#作为运行脚本的非交互式shell" class="header-anchor">#</a> 作为运行脚本的非交互式shell</h4> <h3 id="环境变量持久化"><a href="#环境变量持久化" class="header-anchor">#</a> 环境变量持久化</h3> <p>对全局环境变量（Linux系统的所有用户都要用到的变量）来说，可能更倾向于将新的或修改过的变量设置放在/etc/profile文件中</p> <p>最好在/etc/profile.d目录中创建一个以.sh结尾的文件。把所有新的或修改过的全局环境变量设置都放在这个文件中</p> <p>保存个人用户永久性bash shell变量的最佳地点是$HOME/.bashrc文件</p> <h3 id="数组变量"><a href="#数组变量" class="header-anchor">#</a> 数组变量</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token assign-left variable">my_var</span><span class="token operator">=</span><span class="token punctuation">(</span>one two three<span class="token punctuation">)</span>
$ <span class="token builtin class-name">echo</span> <span class="token variable">$my_var</span>
one
$ <span class="token builtin class-name">echo</span> <span class="token variable">${my_var<span class="token punctuation">[</span>1<span class="token punctuation">]</span>}</span>
two
</code></pre></div><h2 id="linux文件权限"><a href="#linux文件权限" class="header-anchor">#</a> Linux文件权限</h2> <h3 id="linux安全性"><a href="#linux安全性" class="header-anchor">#</a> Linux安全性</h3> <p>Linux系统会为各种各样的功能创建不同的用户账户，而这些账户并非真正的人类用户。我们称其为系统账户，它们是系统中运行的各种服务进程访问资源使用的特殊账户</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> /etc/passwd
root:x:0:0:root:/root:/bin/bash
bin:x:1:1:bin:/bin:/sbin/nologin
daemon:x:2:2:daemon:/sbin:/sbin/nologint
<span class="token punctuation">..</span>.
rich:x:500:500:Rich Blum:/home/rich:/bin/bash
mama:x:501:501:Mama:/home/mama:/bin/bash
$
</code></pre></div><ul><li>登录用户名</li> <li>用户密码（x不是真正的密码，密码在/etc/shadow中，只有root用户可以访问）</li> <li>用户账户的UID（数字形式）</li> <li>用户账户的组ID（数字形式）</li> <li>用户账户的文本描述（称为备注字段）</li> <li>用户$HOME目录的位置</li> <li>用户的默认shell</li></ul> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">cat</span> /etc/shadow
<span class="token punctuation">..</span>.
yuan:<span class="token variable">$y</span><span class="token variable">$j9T</span><span class="token variable">$FycewZ63yRNgqEJ0Uwo0V0</span><span class="token variable">$4nj</span>.vGqTD6MFqK/.ob0Mx1MTKxyiOEHKUhpJ2yALufD:19702:0:99999:7:::
<span class="token punctuation">..</span>.
</code></pre></div><ul><li>登录名，对应于/etc/passwd文件中的登录名</li> <li>加密后的密码</li> <li>自上次修改密码后已经过去的天数（从1970年1月1日开始计算）</li> <li>多少天后才能更改密码</li> <li>多少天后必须更改密码</li> <li>密码过期前提前多少天提醒用户更改密码</li> <li>密码过期后多少天禁用用户账户</li> <li>用户账户被禁用的日期（以从1970年1月1日到当时的天数表示）</li> <li>预留给以后使用的字段。</li></ul> <h3 id="用户"><a href="#用户" class="header-anchor">#</a> 用户</h3> <h4 id="添加用户的默认值"><a href="#添加用户的默认值" class="header-anchor">#</a> 添加用户的默认值</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">useradd</span> <span class="token parameter variable">-D</span> <span class="token comment">#查看命令行中创建新用户账户时的默认值</span>
<span class="token assign-left variable">GROUP</span><span class="token operator">=</span><span class="token number">100</span>
<span class="token assign-left variable"><span class="token environment constant">HOME</span></span><span class="token operator">=</span>/home
<span class="token assign-left variable">INACTIVE</span><span class="token operator">=</span>-1
<span class="token assign-left variable">EXPIRE</span><span class="token operator">=</span>
<span class="token assign-left variable"><span class="token environment constant">SHELL</span></span><span class="token operator">=</span>/bin/bash
<span class="token assign-left variable">SKEL</span><span class="token operator">=</span>/etc/skel
<span class="token assign-left variable">CREATE_MAIL_SPOOL</span><span class="token operator">=</span>no
$

$ <span class="token function">ls</span> <span class="token parameter variable">-al</span> /etc/skel/
总计 <span class="token number">28</span>
drwxr-xr-x   <span class="token number">2</span> root root  <span class="token number">4096</span>  <span class="token number">2</span>月 <span class="token number">23</span>  <span class="token number">2023</span> <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">152</span> root root <span class="token number">12288</span> <span class="token number">12</span>月 <span class="token number">22</span> <span class="token number">16</span>:47 <span class="token punctuation">..</span>
-rw-r--r--   <span class="token number">1</span> root root   <span class="token number">220</span>  <span class="token number">1</span>月  <span class="token number">7</span>  <span class="token number">2022</span> .bash_logout
-rw-r--r--   <span class="token number">1</span> root root  <span class="token number">3771</span>  <span class="token number">1</span>月  <span class="token number">7</span>  <span class="token number">2022</span> .bashrc
-rw-r--r--   <span class="token number">1</span> root root   <span class="token number">807</span>  <span class="token number">1</span>月  <span class="token number">7</span>  <span class="token number">2022</span> .profile
$
</code></pre></div><ul><li>新用户会被添加到GID为100的公共组</li> <li>新用户的主目录会位于/home/loginname</li> <li>新用户账户密码在过期后不会被禁用</li> <li>新用户账户不设置过期日期</li> <li>新用户账户将bash shell作为默认shell</li> <li>系统会将/etc/skel目录的内容复制到用户的$HOME目录</li> <li>系统不会为该用户账户在mail目录下创建一个用于接收邮件的文件</li></ul> <blockquote><p>useradd命令的默认值使用/etc/default/useradd文件设置。另外，进一步的安全设置在/etc/login.defs文件中定义。你可以调整这些文件，改变Linux系统默认的安全行为。</p></blockquote> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">useradd</span> <span class="token parameter variable">-D</span> <span class="token parameter variable">-s</span> /bin/tsch
$ <span class="token function">useradd</span> <span class="token parameter variable">-D</span>
<span class="token assign-left variable">GROUP</span><span class="token operator">=</span><span class="token number">100</span>
<span class="token assign-left variable"><span class="token environment constant">HOME</span></span><span class="token operator">=</span>/home
<span class="token assign-left variable">INACTIVE</span><span class="token operator">=</span>-1
<span class="token assign-left variable">EXPIRE</span><span class="token operator">=</span>
<span class="token assign-left variable"><span class="token environment constant">SHELL</span></span><span class="token operator">=</span>/bin/tsch
<span class="token assign-left variable">SKEL</span><span class="token operator">=</span>/etc/skel
<span class="token assign-left variable">CREATE_MAIL_SPOOL</span><span class="token operator">=</span>no
$
</code></pre></div><h4 id="添加用户"><a href="#添加用户" class="header-anchor">#</a> 添加用户</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">useradd</span> <span class="token parameter variable">-m</span> <span class="token builtin class-name">test</span>
$ <span class="token function">ls</span> <span class="token parameter variable">-al</span> /home/test
total <span class="token number">24</span>
drwxr-xr-x <span class="token number">2</span> <span class="token builtin class-name">test</span> <span class="token builtin class-name">test</span> <span class="token number">4096</span> <span class="token number">2010</span>-09-23 <span class="token number">19</span>:01 <span class="token builtin class-name">.</span>
drwxr-xr-x <span class="token number">4</span> root root <span class="token number">4096</span> <span class="token number">2010</span>-09-23 <span class="token number">19</span>:01 <span class="token punctuation">..</span>
-rw-r--r-- <span class="token number">1</span> <span class="token builtin class-name">test</span> <span class="token builtin class-name">test</span>  <span class="token number">220</span> <span class="token number">2010</span>-04-18 <span class="token number">21</span>:51 .bash_logout
-rw-r--r-- <span class="token number">1</span> <span class="token builtin class-name">test</span> <span class="token builtin class-name">test</span> <span class="token number">3103</span> <span class="token number">2010</span>-04-18 <span class="token number">21</span>:51 .bashrc
-rw-r--r-- <span class="token number">1</span> <span class="token builtin class-name">test</span> <span class="token builtin class-name">test</span>  <span class="token number">675</span> <span class="token number">2010</span>-04-18 <span class="token number">21</span>:51 .profile
$
</code></pre></div><ul><li><p>useradd命令默认并不创建$HOME目录，但是-m命令行选项会使其创建$HOME目录。可以在/etc/login.defs文件中更改该行为</p></li> <li><p>useradd命令创建了新的$HOME目录，并将/etc/skel目录中的文件复制了过来</p></li></ul> <table><thead><tr><th>选项</th> <th>描述</th></tr></thead> <tbody><tr><td>-c</td> <td>给用户添加备注</td></tr> <tr><td>-d</td> <td>为主目录指定一个名字（默认登陆名）</td></tr> <tr><td>-e</td> <td>用YYY-MM-DD格式指定账户过期日期</td></tr> <tr><td>-f</td> <td>指定账户过期多少天后禁用该用户；0表示立即禁用，-1表示不使用这个功能</td></tr> <tr><td>-g</td> <td>指定用户登陆组的GID或组名</td></tr> <tr><td>-G</td> <td>指定除用户组之外用户所属的一个或多个附加组</td></tr> <tr><td>-k</td> <td>必须和-m一起使用，将/etc/skel目录的内容复制到用户的$HOME目录</td></tr> <tr><td>-m</td> <td>创建用户的$HOME目录</td></tr> <tr><td>-M</td> <td>不创建用户的$HOME目录</td></tr> <tr><td>-r</td> <td>创建系统账户</td></tr> <tr><td>-p</td> <td>加密后的新账户密码</td></tr> <tr><td>-s</td> <td>指定默认的登录shell</td></tr> <tr><td>-u</td> <td>为账户指定一个唯一的UID</td></tr></tbody></table> <h4 id="删除用户"><a href="#删除用户" class="header-anchor">#</a> 删除用户</h4> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">userdel</span> <span class="token parameter variable">-r</span> <span class="token builtin class-name">test</span> <span class="token comment">#-r选项表示userdel会删除用户的$HOME目录以及邮件目录</span>
</code></pre></div><h4 id="修改用户"><a href="#修改用户" class="header-anchor">#</a> 修改用户</h4> <p>usermod命令提供了修改/etc/passwd文件中大部分字段的相关选项</p> <table><thead><tr><th>选项</th> <th>描述</th></tr></thead> <tbody><tr><td>-c</td> <td>用于修改备注字段</td></tr> <tr><td>-e</td> <td>用于修改过期日期</td></tr> <tr><td>-g</td> <td>用于修改默认的登录组</td></tr> <tr><td>-G</td> <td>新的附加组列表 GROUP</td></tr> <tr><td>-l</td> <td>修改用户账户的登录名</td></tr> <tr><td>-L</td> <td>锁定账户，禁止用户登录</td></tr> <tr><td>-p</td> <td>修改账户密码</td></tr> <tr><td>-U</td> <td>解除锁定，恢复用户登录</td></tr> <tr><td>-L</td> <td>锁定账户，使用户无法登录，无须删除账户和用户数据。要恢复账户，只需使用-U选项即可</td></tr></tbody></table> <p><strong>修改密码</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">passwd</span> <span class="token builtin class-name">test</span>
Changing password <span class="token keyword">for</span> user test.
New UNIX password:
Retype new UNIX password:
passwd: all authentication tokens updated successfully.
$
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> chpasswd <span class="token comment">#批量修改密码 -c 启用不同的加密方法 -e 加密输入</span>
test:12349876 <span class="token comment">#Ctrl+D保存</span>
$ 
</code></pre></div><p><strong>修改sh</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> chsh <span class="token parameter variable">-s</span> /bin/csh <span class="token builtin class-name">test</span>
Changing shell <span class="token keyword">for</span> test.
Shell changed.
$
</code></pre></div><p><strong>修改用户备注信息</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> chfn <span class="token builtin class-name">test</span>
正在改变 <span class="token builtin class-name">test</span> 的用户信息
请输入新值，或直接敲回车键以使用默认值
	全名 <span class="token punctuation">[</span><span class="token punctuation">]</span>: test11
	房间号码 <span class="token punctuation">[</span><span class="token punctuation">]</span>: <span class="token number">12</span>
	工作电话 <span class="token punctuation">[</span><span class="token punctuation">]</span>: <span class="token number">23123123123</span>
	家庭电话 <span class="token punctuation">[</span><span class="token punctuation">]</span>: <span class="token number">12312312</span>
	其它 <span class="token punctuation">[</span><span class="token punctuation">]</span>: <span class="token number">123</span>
$ <span class="token function">grep</span> <span class="token builtin class-name">test</span> /etc/passwd
test:x:1001:1002:test11,12,23123123123,12312312,123:/home/test:/bin/dash
</code></pre></div><p><strong>修改账户有效期</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> chage <span class="token parameter variable">-l</span> <span class="token builtin class-name">test</span> <span class="token comment">#查看当前密码过期信息</span>
最近一次密码修改时间					： <span class="token number">12</span>月 <span class="token number">25</span>, <span class="token number">2023</span>
密码过期时间					： 从不
密码失效时间					： 从不
帐户过期时间						： 从不
两次改变密码之间相距的最小天数		：0
两次改变密码之间相距的最大天数		：99999
在密码过期之前警告的天数	：7
$ <span class="token function">sudo</span> chage <span class="token parameter variable">-M</span> <span class="token number">10</span> <span class="token builtin class-name">test</span> <span class="token comment">#修改密码有效期</span>
$ <span class="token function">sudo</span> chage <span class="token parameter variable">-l</span> <span class="token builtin class-name">test</span>
最近一次密码修改时间					： <span class="token number">12</span>月 <span class="token number">25</span>, <span class="token number">2023</span>
密码过期时间					： <span class="token number">1</span>月 04, <span class="token number">2024</span>
密码失效时间					： 从不
帐户过期时间						： 从不
两次改变密码之间相距的最小天数		：0
两次改变密码之间相距的最大天数		：10
在密码过期之前警告的天数	：7
$ <span class="token function">sudo</span> chage <span class="token parameter variable">-W</span> <span class="token number">2</span>  <span class="token builtin class-name">test</span> <span class="token comment">#密码过期前警告用户</span>
$ <span class="token function">sudo</span> chage <span class="token parameter variable">-l</span> <span class="token builtin class-name">test</span>
最近一次密码修改时间					： <span class="token number">12</span>月 <span class="token number">25</span>, <span class="token number">2023</span>
密码过期时间					： <span class="token number">1</span>月 04, <span class="token number">2024</span>
密码失效时间					： 从不
帐户过期时间						： 从不
两次改变密码之间相距的最小天数		：0
两次改变密码之间相距的最大天数		：10
在密码过期之前警告的天数	：2
$ <span class="token function">sudo</span> chage <span class="token parameter variable">-E</span> <span class="token number">2024</span>-01-15  <span class="token builtin class-name">test</span> <span class="token comment">#锁定账户</span>
$ <span class="token function">sudo</span> chage <span class="token parameter variable">-l</span> <span class="token builtin class-name">test</span>
最近一次密码修改时间					： <span class="token number">12</span>月 <span class="token number">25</span>, <span class="token number">2023</span>
密码过期时间					： <span class="token number">1</span>月 04, <span class="token number">2024</span>
密码失效时间					： 从不
帐户过期时间						： <span class="token number">1</span>月 <span class="token number">15</span>, <span class="token number">2024</span>
两次改变密码之间相距的最小天数		：0
两次改变密码之间相距的最大天数		：10
在密码过期之前警告的天数	：2

</code></pre></div><h3 id="用户组"><a href="#用户组" class="header-anchor">#</a> 用户组</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">cat</span> /etc/group
root:x:0:
daemon:x:1:
bin:x:2:
<span class="token punctuation">..</span>.
</code></pre></div><ul><li>组名</li> <li>组密码</li> <li>GID</li> <li>属于该组的用户列表</li></ul> <blockquote><p>当一个用户在/etc/passwd文件中指定某个组作为主要组时，该用户不会作为该组成员再出现在/etc/group文件中</p></blockquote> <h4 id="创建新组"><a href="#创建新组" class="header-anchor">#</a> 创建新组</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">groupadd</span> test2
</code></pre></div><blockquote><p>在创建新组时，默认不为其分配任何用户。可以用usermod命令来解决，-g选项，则指定的组名会替换掉在/etc/passwd文件中为该用户分配的主要组。-G选项则会将该组加入该用户的属组列表，不会影响主要组。</p></blockquote> <h4 id="修改组"><a href="#修改组" class="header-anchor">#</a> 修改组</h4> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">groupmod</span> <span class="token parameter variable">-n</span> test3 test2 <span class="token comment">#-n，改组名；-g，改GID</span>
</code></pre></div><p>由于所有的安全权限均基于GID，因此可以随意改变组名，不会影响文件的安全性</p> <h3 id="文件权限"><a href="#文件权限" class="header-anchor">#</a> 文件权限</h3> <p><strong>文件权限符号</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">ls</span> <span class="token parameter variable">-l</span>
drwxr-x---  <span class="token number">2</span> <span class="token builtin class-name">test</span> <span class="token builtin class-name">test</span> <span class="token number">4096</span> <span class="token number">12</span>月 <span class="token number">25</span> <span class="token number">17</span>:01 <span class="token builtin class-name">test</span>
</code></pre></div><ul><li>rwx：属主权限</li> <li>r-x：属组权限</li> <li>---：系统其他用户权限</li></ul> <blockquote><p>r: 4, w: 2, x: 1</p></blockquote> <p><strong>默认文件权限</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">ls</span> <span class="token parameter variable">-l</span>
drwxrwxr-x <span class="token number">2</span> yuan yuan  <span class="token number">4096</span> <span class="token number">12</span>月 <span class="token number">21</span> <span class="token number">19</span>:16 my_dir <span class="token comment">#777-002=775</span>
-rw-rw-r-- <span class="token number">1</span> yuan yuan    <span class="token number">30</span> <span class="token number">12</span>月 <span class="token number">21</span> <span class="token number">22</span>:02 my_file <span class="token comment">#666-002=664</span>

$ <span class="token builtin class-name">umask</span>
0002 <span class="token comment">#八进制的</span>
</code></pre></div><ul><li>第一位文件共享相关，表示的是SUID、SGID和粘滞位的八进制值，参见文件共享</li> <li>umask值只是个掩码，会屏蔽掉不想授予该安全级别的权限</li> <li>要把umask值从对象的全权限值（full permission）中减掉。对文件而言，全权限值是666（所有用户都有读取和写入的权限）；对目录而言，全权限值则是777（所有用户都有读取、写入和执行权限）</li></ul> <h4 id="更改安全设置"><a href="#更改安全设置" class="header-anchor">#</a> 更改安全设置</h4> <h5 id="修改权限"><a href="#修改权限" class="header-anchor">#</a> 修改权限</h5> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">chmod</span> <span class="token number">760</span> newfile
$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> newfile
-rwxrw----    <span class="token number">1</span> rich     rich            <span class="token number">0</span> Sep <span class="token number">20</span> <span class="token number">19</span>:16 newfile
$

$ <span class="token function">chmod</span> o+r newfile <span class="token comment">#chmod [ugoa...][[+-=][rwxXstugo...] file</span>
$ <span class="token function">ls</span> <span class="token parameter variable">-l</span> newfile
-rwxrw-r--    <span class="token number">1</span> rich     rich            <span class="token number">0</span> Sep <span class="token number">20</span> <span class="token number">19</span>:16 newfile
$
</code></pre></div><ol><li><p>第一组字符定义了权限作用的对象</p> <ul><li><p>u代表用户</p></li> <li><p>g代表组</p></li> <li><p>o代表其他用户</p></li> <li><p>a代表上述所有</p></li></ul></li> <li><p>在现有权限基础上增加权限（+）、移除权限（-），还是设置权限（=）</p></li> <li><p>第三个符号代表要设置的权限，除rwx外，还有</p> <ul><li><p>X：仅当对象是目录或者已有执行权限时才赋予执行权限</p></li> <li><p>s：在执行时设置SUID或SGID</p></li> <li><p>t：设置粘滞位（sticky bit）</p></li> <li><p>u：设置属主权限</p></li> <li><p>g：设置属组权限</p></li> <li><p>o：设置其他用户权限</p></li></ul></li></ol> <h5 id="改变所属关系"><a href="#改变所属关系" class="header-anchor">#</a> 改变所属关系</h5> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">chown</span> test.test my_file
$ <span class="token function">ls</span> <span class="token parameter variable">-l</span>
drwxrwxr-x <span class="token number">2</span> yuan yuan  <span class="token number">4096</span> <span class="token number">12</span>月 <span class="token number">21</span> <span class="token number">19</span>:16 my_dir
-rw-rw-rw- <span class="token number">1</span> <span class="token builtin class-name">test</span> <span class="token builtin class-name">test</span>    <span class="token number">30</span> <span class="token number">12</span>月 <span class="token number">21</span> <span class="token number">22</span>:02 my_file
</code></pre></div><ul><li>-R选项与通配符相配合可以递归地修改子目录和文件的所属关系</li> <li>-h选项可以修改文件的所有符号链接文件的所属关系</li> <li>只有root用户能修改文件的属主。任何用户都可以修改文件的属组，但前提是该用户必须是原属组和新属组的成员</li></ul> <h3 id="文件共享"><a href="#文件共享" class="header-anchor">#</a> 文件共享</h3> <p>Linux为每个文件和目录存储了3个额外的信息位</p> <ul><li>SUID（set user ID）：当用户执行该文件时，程序会以文件属主的权限运行</li> <li>SGID（set group ID）：对文件而言，程序会以文件属组的权限运行；对目录而言，该目录中创建的新文件会以目录的属组作为默认属组</li> <li>粘滞位（sticky bit）：应用于目录时，只有文件属主可以删除或重命名该目录中的文件</li></ul> <p>可以通过chmod命令设置SGID，将其添加到标准3位八进制值之前（组成4位八进制值），或者在符号模式下用符号s。</p> <table><thead><tr><th>八进制</th> <th>描述</th></tr></thead> <tbody><tr><td>0</td> <td>清除所有位</td></tr> <tr><td>1</td> <td>设置粘滞位</td></tr> <tr><td>2</td> <td>设置SGID位</td></tr> <tr><td>3</td> <td>设置SGID和粘滞位</td></tr> <tr><td>4</td> <td>设置SUID位</td></tr> <tr><td>5</td> <td>设置SUID和粘滞位</td></tr> <tr><td>6</td> <td>设置SUID和SGID位</td></tr> <tr><td>7</td> <td>设置所有位</td></tr></tbody></table> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">mkdir</span> testdir
$ <span class="token function">ls</span> <span class="token parameter variable">-l</span>
drwxrwxr-x    <span class="token number">2</span> rich     rich         <span class="token number">4096</span> Sep <span class="token number">20</span> <span class="token number">23</span>:12 testdir/
$ <span class="token function">chgrp</span> shared testdir
$ <span class="token function">chmod</span> g+s testdir
$ <span class="token function">ls</span> <span class="token parameter variable">-l</span>
drwxrwsr-x    <span class="token number">2</span> rich     shared       <span class="token number">4096</span> Sep <span class="token number">20</span> <span class="token number">23</span>:12 testdir/
$ <span class="token builtin class-name">umask</span> 002
$ <span class="token builtin class-name">cd</span> testdir
$ <span class="token function">touch</span> testfile
$ <span class="token function">ls</span> <span class="token parameter variable">-l</span>
total <span class="token number">0</span>
-rw-rw-r--    <span class="token number">1</span> rich     shared          <span class="token number">0</span> Sep <span class="token number">20</span> <span class="token number">23</span>:13 testfile
$
</code></pre></div><p>首先，使用mkdir命令创建希望共享的目录</p> <p>然后，通过chgrp命令修改目录的默认属组，使其包含所有需要共享文件的用户</p> <p>最后，设置目录的SGID位，保证目录中的新建文件都以shared作为默认属组</p> <h3 id="访问控制列表"><a href="#访问控制列表" class="header-anchor">#</a> 访问控制列表</h3> <p>访问控制列表（access control list，ACL）允许指定包含多个用户或组的列表以及为其分配的权限。和基本安全方法一样，ACL权限使用相同的读取、写入和执行权限位，但现在可以分配给多个用户和组</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">touch</span> <span class="token builtin class-name">test</span>
$ <span class="token function">ls</span> <span class="token parameter variable">-l</span>
total <span class="token number">0</span>
-rw-r----- <span class="token number">1</span> rich rich <span class="token number">0</span> Apr <span class="token number">19</span> <span class="token number">17</span>:33 <span class="token builtin class-name">test</span>
$ getfacl <span class="token builtin class-name">test</span>
<span class="token comment"># file: test</span>
<span class="token comment"># owner: rich</span>
<span class="token comment"># group: rich</span>
user::rw-
group::r--
other::---
$
</code></pre></div><p>setfacl命令允许使用-m选项修改分配给文件或目录的权限，或使用-x选项删除特定权限</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ setfacl <span class="token parameter variable">-m</span> g:sales:rw <span class="token builtin class-name">test</span>
$ <span class="token function">ls</span> <span class="token parameter variable">-l</span>
total <span class="token number">0</span>
-rw-rw----+ <span class="token number">1</span> rich rich <span class="token number">0</span> Apr <span class="token number">19</span> <span class="token number">17</span>:33 <span class="token builtin class-name">test</span> <span class="token comment">#+表示应用了ACL</span>
$

$ getfacl <span class="token builtin class-name">test</span>
<span class="token comment"># file: test</span>
<span class="token comment"># owner: rich</span>
<span class="token comment"># group: rich</span>
user::rw-
group::r--
group:sales:rw-
mask::rw-
other::---
$
</code></pre></div><p>要想删除权限，可以使用-x选项</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ setfacl <span class="token parameter variable">-x</span> g:sales <span class="token builtin class-name">test</span>
$ getfacl <span class="token builtin class-name">test</span>
<span class="token comment"># file: test</span>
<span class="token comment"># owner: rich</span>
<span class="token comment"># group: rich</span>
user::rw-
group::r--
mask::r--
other::---
$
</code></pre></div><p>要想设置目录的默认ACL，可以在正常的规则定义前加上d:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> setfacl <span class="token parameter variable">-m</span> d:g:sales:rw <span class="token builtin class-name">test</span>
</code></pre></div><p>删除所有ACL</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> setfacl <span class="token parameter variable">-b</span> <span class="token builtin class-name">test</span>
</code></pre></div><h2 id="linux文件系统"><a href="#linux文件系统" class="header-anchor">#</a> Linux文件系统</h2> <p>Linux采用了一种标准格式来为硬盘分配设备名称</p> <ul><li>SATA驱动器和SCSI驱动器：设备命名格式为/dev/sdx，其中字母x具体是什么要根据驱动器的检测顺序决定（第一个检测到的驱动器是a，第二个是b，以此类推）</li> <li>SSD NVMe驱动器：设备命名格式为/dev/nvmeNn#，其中数字N具体是什么要根据驱动器的检测顺序决定（从0起始）。#是分配给该驱动器的名称空间编号（从1起始）</li> <li>IDE驱动器：设备命名格式为/dev/hdx，其中字母x具体是什么要根据驱动器的检测顺序决定（第一个检测到的驱动器是a，第二个是b，以此类推）</li></ul> <h3 id="创建分区"><a href="#创建分区" class="header-anchor">#</a> 创建分区</h3> <p>分区工具 fdisk， gdisk ，GNU parted</p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> <span class="token function">fdisk</span> /dev/sda <span class="token comment">#选择命令操作</span>

Welcome to <span class="token function">fdisk</span> <span class="token punctuation">(</span>util-linux <span class="token number">2.32</span>.1<span class="token punctuation">)</span>.
Changes will remain <span class="token keyword">in</span> memory only, <span class="token keyword">until</span> you decide to <span class="token function">write</span> them.
Be careful before using the <span class="token function">write</span> command.
　
　
Command <span class="token punctuation">(</span>m <span class="token keyword">for</span> <span class="token builtin class-name">help</span><span class="token punctuation">)</span>:m
</code></pre></div><h3 id="格式化"><a href="#格式化" class="header-anchor">#</a> 格式化</h3> <table><thead><tr><th>工具</th> <th>用途</th></tr></thead> <tbody><tr><td>mkefs</td> <td>创建ext文件系统</td></tr> <tr><td>mke2fs</td> <td>创建ext2文件系统</td></tr> <tr><td>mkfs.ext3</td> <td>创建ext3文件系统</td></tr> <tr><td>mkfs.ext4</td> <td>创建ext4文件系统</td></tr> <tr><td>mkreiserfs</td> <td>创建ReiserFS文件系统</td></tr> <tr><td>jfs_mkfs</td> <td>创建JFS文件系统</td></tr> <tr><td>mkfs.xfs</td> <td>创建XFS文件系统</td></tr> <tr><td>mkfs.zfs</td> <td>创建ZFS文件系统</td></tr> <tr><td>mkfs.btrfs</td> <td>创建Btrfs文件系统</td></tr></tbody></table> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> mkfs.ext4 /dev/sdb1
<span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> password <span class="token keyword">for</span> christine:
<span class="token function">mke2fs</span> <span class="token number">1.44</span>.6 <span class="token punctuation">(</span><span class="token number">5</span>-Mar-2019<span class="token punctuation">)</span>
Creating filesystem with <span class="token number">524032</span> 4k blocks and <span class="token number">131072</span> inodes
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
Creating journal <span class="token punctuation">(</span><span class="token number">8192</span> blocks<span class="token punctuation">)</span>: <span class="token keyword">done</span>
Writing superblocks and filesystem accounting information: <span class="token keyword">done</span>
$
</code></pre></div><h3 id="文件系统的检查与修复"><a href="#文件系统的检查与修复" class="header-anchor">#</a> 文件系统的检查与修复</h3> <p>fsck命令可以检查和修复大部分Linux文件系统类型</p> <p>只能对未挂载的文件系统执行fsck命令。对大多数文件系统来说，只需先卸载文件系统，检查完成之后再重新挂载即可</p> <p>用Linux Live媒介启动系统，对根文件系统执行fsck命令</p> <h3 id="逻辑卷"><a href="#逻辑卷" class="header-anchor">#</a> 逻辑卷</h3> <p><strong>1.物理卷物理卷（physical volume，PV）</strong></p> <p>通过LVM的pvcreate命令创建。该命令指定了一个未使用的磁盘分区（或整个驱动器）由LVM使用。在这个过程中，LVM结构、卷标和元数据都会被添加到该分区。</p> <p><strong>2.卷组卷组（volume group，VG）</strong></p> <p>通过LVM的vgcreate命令创建。该命令会将PV加入存储池，后者随后用于构建各种逻辑卷。[插图]可以存在多个卷组。当你使用vgcreate将一个或多个PV加入VG时，也会同时添加卷组的元数据。被指定为PV的分区只能属于单个VG。但是，被指定为PV的其他分区可以属于其他VG。</p> <p><strong>3.逻辑卷逻辑卷（logical volume，LV）</strong></p> <p>通过LVM的lvcreate命令创建。这是逻辑卷创建过程的最终产物。LV由VG的存储空间块[插图]组成。你可以使用文件系统格式化LV，然后将其挂载，像普通的磁盘分区那样使用。尽管可以有多个VG，但LV只能从一个指定的VG中创建。[插图]不过，多个LV可以共享单个VG。你可以使用相应的LVM命令调整（增加或减少）LV的容量。该特性赋予了数据存储管理极大的灵活性。</p> <p><strong>(1) 创建物理卷。(2) 创建卷组。(3) 创建逻辑卷。(4) 格式化逻辑卷。(5) 挂载逻辑卷</strong></p> <div class="language-bash extra-class"><pre class="language-bash"><code>$ lsblk
NAME        MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
sdb           <span class="token number">8</span>:16   <span class="token number">0</span>    2G  <span class="token number">0</span> disk
⌙sdb1         <span class="token number">8</span>:17   <span class="token number">0</span>    2G  <span class="token number">0</span> part
sdc           <span class="token number">8</span>:32   <span class="token number">0</span>    1G  <span class="token number">0</span> disk
⌙sdc1         <span class="token number">8</span>:33   <span class="token number">0</span> 1023M  <span class="token number">0</span> part
sdd           <span class="token number">8</span>:48   <span class="token number">0</span>    1G  <span class="token number">0</span> disk
⌙sdd1         <span class="token number">8</span>:49   <span class="token number">0</span> 1023M  <span class="token number">0</span> part
sde           <span class="token number">8</span>:64   <span class="token number">0</span>    1G  <span class="token number">0</span> disk
⌙sde1         <span class="token number">8</span>:65   <span class="token number">0</span> 1023M  <span class="token number">0</span> part
sr0           <span class="token number">11</span>:0   <span class="token number">1</span> 1024M  <span class="token number">0</span> rom
$
$ <span class="token function">sudo</span> pvcreate /dev/sdc1 /dev/sdd1 /dev/sde1
<span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> password <span class="token keyword">for</span> christine:
  Physical volume <span class="token string">&quot;/dev/sdc1&quot;</span> successfully created.
  Physical volume <span class="token string">&quot;/dev/sdd1&quot;</span> successfully created.
  Physical volume <span class="token string">&quot;/dev/sde1&quot;</span> successfully created.
$
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> vgdisplay
  --- Volume group ---
  VG Name               cl
  System ID
  Format                lvm2
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
$

$ <span class="token function">sudo</span> vgcreate vg00 /dev/sdc1 /dev/sdd1
  Volume group <span class="token string">&quot;vg00&quot;</span> successfully created
$
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> lvcreate <span class="token parameter variable">-L</span> 1g <span class="token parameter variable">-v</span> vg00
<span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> password <span class="token keyword">for</span> christine:
  Archiving volume group <span class="token string">&quot;vg00&quot;</span> metadata <span class="token punctuation">(</span>seqno <span class="token number">1</span><span class="token punctuation">)</span>.
  Creating logical volume lvol0
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
  Logical volume <span class="token string">&quot;lvol0&quot;</span> created.
$

$ <span class="token function">sudo</span> lvdisplay /dev/vg00/lvol0
<span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> password <span class="token keyword">for</span> christine:
  --- Logical volume ---
  LV Path                 /dev/vg00/lvol0
  LV Name                 lvol0
  VG Name                 vg00
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
  LV Size                 <span class="token number">1.00</span> GiB
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
$
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">sudo</span> mkfs.ext4 /dev/vg00/lvol0
<span class="token punctuation">[</span>sudo<span class="token punctuation">]</span> password <span class="token keyword">for</span> christine:
<span class="token punctuation">[</span><span class="token punctuation">..</span>.<span class="token punctuation">]</span>
Writing inode tables: <span class="token keyword">done</span>
Creating journal <span class="token punctuation">(</span><span class="token number">8192</span> blocks<span class="token punctuation">)</span>: <span class="token keyword">done</span>
Writing superblocks and filesystem accounting information: <span class="token keyword">done</span>

$ <span class="token function">mkdir</span> my_LV
$ <span class="token function">sudo</span> <span class="token function">mount</span> <span class="token parameter variable">-t</span> ext4 /dev/vg00/lvol0 my_LV
$ <span class="token function">ls</span> my_LV
lost+found
$
</code></pre></div><p><strong>扩大或收缩VG和LV&amp;</strong></p> <p>Vgextend：将PV加入VG</p> <p>Vgreduce：从VG删除PV</p> <p>lvextend：扩大LV容量</p> <p>lvreduce：收缩LV容量</p> <h2 id="编辑器"><a href="#编辑器" class="header-anchor">#</a> 编辑器</h2> <h3 id="vim"><a href="#vim" class="header-anchor">#</a> vim</h3> <p><strong>vim编辑器有3种操作模式</strong></p> <ul><li>命令模式</li> <li>Ex模式</li> <li>插入模式</li></ul> <p>刚打开要编辑的文件（或新建文件）时，vim编辑器会进入命令模式</p> <p>在命令模式中，vim编辑器会将按键解释成命令</p> <p>按下i键就可以进入插入模式。要退出插入模式并返回命令模式，按下Esc键即可</p> <p>在命令模式中按下冒号键（:）进入Ex模式</p> <p><strong>Ex模式命令</strong></p> <ul><li>q：如果未修改缓冲区数据，则退出</li> <li>q!：放弃对缓冲区数据的所有修改并退出</li> <li>w filename：将文件另存为其他名称</li> <li>wq：将缓冲区数据保存到文件中并退出。</li></ul> <p><strong>复制粘贴</strong></p> <ul><li><p>剪切：插入模式按v进入可视模式，移动上下左右选中，按d键剪切，按p键粘贴</p></li> <li><p>复制：插入模式按v进入可视模式，移动上下左右选中，按y键复制，按p键粘贴</p></li></ul> <p><strong>查找和替换</strong></p> <ul><li><p>查找：按下正斜线（/）键，输入查找内容，再按回车；查找下一个，按下正斜线（/）键，再按回车</p></li> <li><p>替换</p> <ul><li>😒/old/new/g：替换当前行内出现的所有old</li> <li>:n,ms/old/new/g：替换第n行和第m行之间出现的所有old</li> <li>:%s/old/new/g：替换整个文件中出现的所有old</li> <li>:%s/old/new/gc：替换整个文件中出现的所有old，并在每次替换时提示</li></ul></li></ul> <h2 id="安装软件"><a href="#安装软件" class="header-anchor">#</a> 安装软件</h2> <blockquote><p>以下安装方式都是基于unbuntu</p></blockquote> <h3 id="使用apt安装"><a href="#使用apt安装" class="header-anchor">#</a> 使用apt安装</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">apt</span> <span class="token parameter variable">--installed</span> list <span class="token comment">#输出已安装在系统中的软件包</span>
Listing<span class="token punctuation">..</span>. Done
accountsservice/focal,now <span class="token number">0.6</span>.55-0ubuntu11 amd64 <span class="token punctuation">[</span>installed,automatic<span class="token punctuation">]</span>
acl/focal,now <span class="token number">2.2</span>.53-6 amd64 <span class="token punctuation">[</span>installed,automatic<span class="token punctuation">]</span>
acpi-support/focal,now <span class="token number">0.143</span> amd64 <span class="token punctuation">[</span>installed,automatic<span class="token punctuation">]</span>
<span class="token punctuation">..</span>.
$
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">apt</span> show <span class="token function">zsh</span> <span class="token comment">#显示其详细信息</span>
Package: <span class="token function">zsh</span>
Version: <span class="token number">5.8</span>-3ubuntu1
Priority: optional
Section: shells
Origin: Ubuntu
Maintainer: Ubuntu Developers <span class="token operator">&lt;</span>ubuntu-devel-discuss@lists.ubuntu.com<span class="token operator">&gt;</span>
Original-Maintainer: Debian Zsh Maintainers <span class="token operator">&lt;</span>pkg-zsh-devel@lists.alioth
.debian.org<span class="token operator">&gt;</span>
Installed-Size: <span class="token number">2,390</span> kB
Depends: zsh-common <span class="token punctuation">(</span><span class="token operator">=</span> <span class="token number">5.8</span>-3ubuntu1<span class="token punctuation">)</span>, libc6 <span class="token punctuation">(</span><span class="token operator">&gt;=</span> <span class="token number">2.29</span><span class="token punctuation">)</span>, libcap2 <span class="token punctuation">(</span><span class="token operator">&gt;=</span> <span class="token number">1</span>:2.10<span class="token punctuation">)</span>,
libtinfo6 <span class="token punctuation">(</span><span class="token operator">&gt;=</span> <span class="token number">6</span><span class="token punctuation">)</span>
Recommends: libgdbm6 <span class="token punctuation">(</span><span class="token operator">&gt;=</span> <span class="token number">1.16</span><span class="token punctuation">)</span>, libncursesw6 <span class="token punctuation">(</span><span class="token operator">&gt;=</span> <span class="token number">6</span><span class="token punctuation">)</span>, libpcre3
Suggests: zsh-doc
Download-Size: <span class="token number">707</span> kB
Description: shell with lots of features
 Zsh is a UNIX <span class="token builtin class-name">command</span> interpreter <span class="token punctuation">(</span>shell<span class="token punctuation">)</span> usable as an
 interactive login shell and as a shell script <span class="token builtin class-name">command</span>
 processor. Of the standard shells, <span class="token function">zsh</span> <span class="token function">most</span> closely resembles
 ksh but includes many enhancements. Zsh has command-line editing,
 built-in spelling correction, programmable <span class="token builtin class-name">command</span> completion,
 shell functions <span class="token punctuation">(</span>with autoloading<span class="token punctuation">)</span>, a <span class="token function">history</span> mechanism, and a
 <span class="token function">host</span> of other features.
$
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>$ dpkg <span class="token parameter variable">-L</span> acl <span class="token comment">#与特定软件包相关的所有文件</span>
/.
/bin
/bin/chacl
/bin/getfacl
/bin/setfacl
/usr
/usr/share
/usr/share/doc
/usr/share/doc/acl
/usr/share/doc/acl/copyright
/usr/share/man
/usr/share/man/man1
/usr/share/man/man1/chacl.1.gz
/usr/share/man/man1/getfacl.1.gz
/usr/share/man/man1/setfacl.1.gz
/usr/share/man/man5
/usr/share/man/man5/acl.5.gz
/usr/share/doc/acl/changelog.Debian.gz
$
</code></pre></div><div class="language-bash extra-class"><pre class="language-bash"><code>$ <span class="token function">apt</span> search zch <span class="token comment">#查找特定的软件</span>
$ <span class="token function">sudo</span> <span class="token function">apt</span> <span class="token function">install</span> zch
$ <span class="token function">sudo</span> <span class="token function">apt</span> upgrade <span class="token comment">#upgrade会将所有已安装的软件包升级为仓库中可用的最新版本</span>
$ <span class="token function">sudo</span> <span class="token function">apt</span> full-upgrade <span class="token comment">#upgrade命令在升级过程中不会删除任何软件包。如果必须删除某个软件包才能完成升级，可以使用full-upgrade</span>
$ <span class="token function">sudo</span> <span class="token function">apt</span> remove zch <span class="token comment">#remove命令可以删除软件包，同时保留数据和配置文件。</span>
$ <span class="token function">sudo</span> <span class="token function">apt</span> purge zch <span class="token comment">#如果要将软件包以及相关的数据和配置文件全部删除，那么需要使用purge选项</span>
$ <span class="token function">sudo</span> <span class="token function">apt</span> autoremove <span class="token comment">#如果确定有依赖关系的软件包不会再有他用，可以使用autoremove命令将其删除</span>
</code></pre></div><h3 id="使用snap容器安装"><a href="#使用snap容器安装" class="header-anchor">#</a> 使用snap容器安装</h3> <div class="language-bash extra-class"><pre class="language-bash"><code>$ snap version
$ snap list
$ snap <span class="token function">find</span> firefox
$ snap info firefox
$ <span class="token function">sudo</span> snap <span class="token function">install</span> firefox
$ <span class="token function">sudo</span> snap remove firefox
</code></pre></div><h3 id="从源代码安装"><a href="#从源代码安装" class="header-anchor">#</a> 从源代码安装</h3> <p>一般步骤</p> <ul><li>解压</li> <li>使用make命令编译源代码，然后由链接器生成最终的可执行文件</li> <li>使用make install安装</li></ul> <h2 id="防火墙"><a href="#防火墙" class="header-anchor">#</a> 防火墙</h2> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token comment"># 查看防火墙状态</span>
$ systemctl status firewalld
<span class="token comment"># 关闭防火墙</span>
$ systemctl stop firewalld.service
<span class="token comment"># 开启防火墙</span>
$ systemctl start firewalld.service
<span class="token comment"># 关闭开机自启动</span>
$ systemctl disable firewalld.service
<span class="token comment"># 开启开机自启动</span>
$ systemctl <span class="token builtin class-name">enable</span> firewalld.service
<span class="token comment"># 开放80端口</span>
$ firewall-cmd <span class="token parameter variable">--zone</span><span class="token operator">=</span>public --add-port<span class="token operator">=</span><span class="token number">80</span>/tcp <span class="token parameter variable">--permanent</span>
<span class="token comment"># 查询端口号80 是否开启</span>
$ firewall-cmd --query-port<span class="token operator">=</span><span class="token number">80</span>/tcp
<span class="token comment"># 重启防火墙</span>
$ firewall-cmd <span class="token parameter variable">--reload</span>
</code></pre></div></div></div> <!----> <div class="page-edit"><!----> <!----> <div class="last-updated"><span class="prefix">上次更新:</span> <span class="time">2024/01/18, 21:49:24</span></div></div> <div class="page-nav-wapper"><!----> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/blog-pub/pages/295aa7/" class="prev">serviceWorker缓存</a></span> <span class="next"><a href="/blog-pub/pages/1644ef/">shell脚本</a>→
      </span></p></div></div></div> <!----></main></div> <div class="footer"><!----> 
  Theme by
  <a href="https://github.com/xugaoyi/vuepress-theme-vdoing" target="_blank" title="本站主题">Vdoing</a> 
    | Copyright © 2022-2024
    <span>Esqbs</span></div> <div class="buttons"><div title="返回顶部" class="button blur go-to-top iconfont icon-fanhuidingbu" style="display:none;"></div> <div title="去评论" class="button blur go-to-comment iconfont icon-pinglun" style="display:none;"></div> <div title="主题模式" class="button blur theme-mode-but iconfont icon-zhuti"><ul class="select-box" style="display:none;"><li class="iconfont icon-zidong">
          跟随系统
        </li><li class="iconfont icon-rijianmoshi">
          浅色模式
        </li><li class="iconfont icon-yejianmoshi">
          深色模式
        </li><li class="iconfont icon-yuedu">
          阅读模式
        </li></ul></div></div> <div class="body-bg" style="background:url() center center / cover no-repeat;opacity:0.5;"></div> <!----> <!----></div><div class="global-ui"></div></div>
    <script src="/blog-pub/assets/js/app.b54a84d7.js" defer></script><script src="/blog-pub/assets/js/2.d3978339.js" defer></script><script src="/blog-pub/assets/js/3.3ba4034a.js" defer></script><script src="/blog-pub/assets/js/41.f90d94c5.js" defer></script>
  </body>
</html>
